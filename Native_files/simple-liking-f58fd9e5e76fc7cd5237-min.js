webpackJsonp([15],{0:function(f,k,b){b(1416);b(335);b(111);b(129);b(130);b(329);b(342);b(330);b(331);b(334);b(177);b(328);b(207);b(184);b(206);b(333);b(332);b(336);b(337);b(338);b(339);b(340);b(341);b(343)},13:function(f,k,b){f.exports=function(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}},14:function(f,k,b){k=b(61);var a=b(20),l=b(19),c=Object.prototype.toString;b=k(Array,"isArray")||function(e){return l(e)&&a(e.length)&&"[object Array]"==c.call(e)};f.exports=b},17:function(f,k,b){var a=
b(13);f.exports=function(b){return a(b)?b:Object(b)}},19:function(f,k,b){f.exports=function(a){return!!a&&"object"==typeof a}},20:function(f,k,b){f.exports=function(a){return"number"==typeof a&&-1<a&&0==a%1&&9007199254740991>=a}},29:function(f,k,b){f.exports={"default":b(117),__esModule:!0}},32:function(f,k,b){var a=b(9)["default"],l=b(8)["default"],c=b(29)["default"],e=b(63)["default"];k=b(7);var d=b(193),g=b(73),h=b(62),n=b(74),m=b(178),t=b(128);b=b(215);var x=b.DEFAULT_COLLECTION_CONFIGURATIONS,
p=b.DEFAULT_COLLECTION_CONFIGURATION,q=b.DEFAULT_TEMPLATE_PAGE_CONFIGURATION;b=function(){function b(){l(this,b);this.bindListeners({handleLoadTemplate:g.LOAD_TEMPLATE,staticInitialized:n.BOOTSTRAP});this.exportPublicMethods({isTemplateOwner:this.isTemplateOwner,getCollectionConfig:this.getCollectionConfig,getCustomType:this.getCustomType,getPageConfig:this.getPageConfig})}a(b,[{key:"getCollectionConfig",value:function(a){return this.getState().collectionConfigs[a]}},{key:"getCustomType",value:function(a){return this.getState().customTypes[a]}},
{key:"getPageConfig",value:function(a){return this.getState().pageConfigs[a]}},{key:"isTemplateOwner",value:function(){var a=this.getState();return a.ownerWebsiteId===a.websiteId}},{key:"staticInitialized",value:function(a){this.setTemplateData(a.template);this.demoCollections=this.processDemoCollections(a.demoCollections);this.websiteId=a.website.id}},{key:"handleLoadTemplate",value:function(a){this.waitFor(h.dispatchToken);a.error?this.error=a.response:(this.error=null,this.setTemplateData(a.template),
this.demoCollections=this.processDemoCollections(a.demoCollections))}},{key:"setTemplateData",value:function(a){a&&(this.id=a.id,this.updatedOn=a.updatedOn,this.ownerWebsiteId=a.ownerWebsiteId,this.collectionConfigs=this.processCollectionConfigs(a.collectionConfigs),this.pageConfigs=this.processPageConfigs(a.pageConfigs),this.customTypes=this.processCustomTypes(a.customTypes),this.layouts=this.processLayouts(a.layouts),this.navigations=a.navigations)}},{key:"processCollectionConfigs",value:function(a){a.products&&
(a.products=c({},x.products,a.products),a.products.ordering=d.USER);a=c({},x,a);a=t(a,function(a){a=c({},p,a);!0===a.index?a.folderBehavior=m.INDEX:!0===a.folder&&(a.folderBehavior=m.NONE);return a});var h=a.folders||a.folder;h&&(h.acceptTypes=this.calculateFolderAcceptTypes(a));return a}},{key:"calculateFolderAcceptTypes",value:function(a){var c=["subscription","gallery-block","template-page"];return e(a).filter(function(d){return a[d].folder?!1:-1===c.indexOf(d)}).concat(["link"])}},{key:"processPageConfigs",
value:function(a){return t(a,function(a){return c({},q,a)})}},{key:"processCustomTypes",value:function(a){return(void 0===a?[]:a).reduce(function(a,c){a[c.name]=c;return a},{})}},{key:"processDemoCollections",value:function(a){return a||[]}},{key:"processLayouts",value:function(a){return a||{}}}]);return b}();f.exports=k.createStore(b,"TemplateStore")},36:function(f,k,b){var a=b(76),l=b(20);f.exports=function(c){return null!=c&&l(a(c))}},37:function(f,k,b){k=b(61);var a=b(36),l=b(13),c=b(121),e=k(Object,
"keys");f.exports=!e?c:function(d){var g=null==d?void 0:d.constructor;return"function"==typeof g&&g.prototype===d||"function"!=typeof d&&a(d)?c(d):l(d)?e(d):[]}},47:function(f,k,b){var a=/^\d+$/;f.exports=function(b,c){b="number"==typeof b||a.test(b)?+b:-1;return-1<b&&0==b%1&&b<(null==c?9007199254740991:c)}},48:function(f,k,b){var a=b(36),l=b(19);k=Object.prototype;var c=k.hasOwnProperty,e=k.propertyIsEnumerable;f.exports=function(d){return l(d)&&a(d)&&c.call(d,"callee")&&!e.call(d,"callee")}},60:function(f,
k,b){f.exports=function(a){return null==a?"":a+""}},61:function(f,k,b){var a=b(114);f.exports=function(b,c){var e=null==b?void 0:b[c];return a(e)?e:void 0}},62:function(f,k,b){var a=b(9)["default"],l=b(8)["default"];k=b(7);var c=b(73),e=b(83),d=b(74);b=function(){function g(){l(this,g);this.templateInstallations={};this.bindListeners({handleLoadSuccess:e.LOAD_SUCCESS,handleLoadFailure:e.LOAD_FAILURE,handleStaticInitialized:d.BOOTSTRAP,handlePreviewSet:e.SET_PREVIEW_INSTALLATION,handleTemplateSet:e.SET_LIVE_INSTALLATION,
handleHomepageCollectionIdSet:e.SET_HOMEPAGE_COLLECTION_ID,handleLoadTemplate:c.LOAD_TEMPLATE});this.exportPublicMethods({getHomepageCollectionId:this.getHomepageCollectionId})}a(g,[{key:"getHomepageCollectionId",value:function(){return this.getState().activeInstallation?this.getState().activeInstallation.homepageCollectionId:this.getState().homepageCollectionId}},{key:"handleStaticInitialized",value:function(a){var c=a.authenticatedAccountWebsiteSettings;this.previewInstallationId=c?c.previewInstallationId:
null;this.homepageCollectionId=a.homepageCollectionId;a.templateInstallation?(this.liveInstallationId=a.templateInstallation.id,this.templateInstallations[this.liveInstallationId]=a.templateInstallation):this.liveInstallationId=null;this.siteLayout=a.siteLayout;this.updateInstallationReferences()}},{key:"updateInstallationReferences",value:function(){this.liveInstallation=this.getTemplateInstallation(this.liveInstallationId);this.previewInstallation=null;this.previewInstallationId!==this.liveInstallationId&&
(this.previewInstallation=this.getTemplateInstallation(this.previewInstallationId));this.activeInstallation=this.liveInstallation||this.previewInstallation}},{key:"getTemplateInstallation",value:function(a){return!a||!this.templateInstallations[a]?null:this.templateInstallations[a]}},{key:"handleLoadTemplate",value:function(a){this.siteLayout=a.siteLayout}},{key:"handleHomepageCollectionIdSet",value:function(a){a.error||(this.homepageCollectionId=a.homepageCollectionId,this.activeInstallation&&(this.activeInstallation.homepageCollectionId=
a.homepageCollectionId))}},{key:"handlePreviewSet",value:function(a){this.previewInstallationId=a;this.updateInstallationReferences()}},{key:"handleTemplateSet",value:function(a){this.liveInstallationId=a;this.previewInstallationId=null;this.updateInstallationReferences()}},{key:"handleLoadSuccess",value:function(a){var c={};a.forEach(function(a){this[a.id]=a},c);this.templateInstallations=c;this.updateInstallationReferences()}},{key:"handleLoadFailure",value:function(){console.error("Unable to load installations")}}]);
return g}();f.exports=k.createStore(b,"TemplateInstallationsStore")},63:function(f,k,b){f.exports={"default":b(180),__esModule:!0}},64:function(f,k,b){f.exports=function(a){return function(b){return null==b?void 0:b[a]}}},73:function(f,k,b){var a=b(9)["default"],l=b(8)["default"];k=b(7);var c=b(195);b=function(){function e(){l(this,e)}a(e,[{key:"loadTemplate",value:function(a){var g=this;c.getTemplate(a).then(function(a){g.dispatch(a.data)},function(a){g.dispatch({error:!0,response:a})})}}]);return e}();
f.exports=k.createActions(b)},76:function(f,k,b){k=b(64)("length");f.exports=k},77:function(f,k,b){f.exports=function(a){return a}},79:function(f,k,b){var a=b(17);f.exports=function(b,c,e){if(null!=b){void 0!==e&&e in a(b)&&(c=[e]);e=0;for(var d=c.length;null!=b&&e<d;)b=b[c[e++]];return e&&e==d?b:void 0}}},80:function(f,k,b){function a(d,g,h,b,m,t){return d===g?!0:null==d||null==g||!c(d)&&!e(g)?d!==d&&g!==g:l(d,g,a,h,b,m,t)}var l=b(165),c=b(13),e=b(19);f.exports=a},81:function(f,k,b){var a=b(14),
l=b(17),c=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,e=/^\w*$/;f.exports=function(d,g){var h=typeof d;return"string"==h&&e.test(d)||"number"==h?!0:a(d)?!1:!c.test(d)||null!=g&&d in l(g)}},82:function(f,k,b){var a=b(60),l=b(14),c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,e=/\\(\\)?/g;f.exports=function(d){if(l(d))return d;var g=[];a(d).replace(c,function(a,c,d,b){g.push(d?b.replace(e,"$1"):c||a)});return g}},83:function(f,k,b){var a=b(9)["default"],l=b(8)["default"],
c=b(194),e=b(196);k=b(7);var d=b(179),g=b(73);b=function(){function h(){l(this,h)}a(h,[{key:"loadAll",value:function(){var a=this;this.dispatch();e.loadTemplateInstallations().then(function(c){a.actions.loadSuccess.defer(c.data)},function(c){a.actions.loadFailure.defer(c.error)})}},{key:"setPreviewInstallation",value:function(a,h,b){var e=this;c.setPreviewInstallation(a,h).then(function(a){g.loadTemplate.defer(b);e.dispatch(h);setTimeout(d.refresh,1E3)},function(a){})}},{key:"setLiveInstallation",
value:function(a,c){var h=this;e.setLiveInstallation(a).then(function(b){g.loadTemplate.defer(c);h.dispatch(a);setTimeout(d.refresh,1E3)},function(a){})}},{key:"setHomepageCollectionId",value:function(a){var c=this;return e.setHomepageCollectionId(a).then(function(d){d={homepageCollectionId:a};c.dispatch(d);return d},function(d){d={homepageCollectionId:a,error:!0};c.dispatch(d);return d})}},{key:"loadSuccess",value:function(a){this.dispatch(a)}},{key:"loadFailure",value:function(a){this.dispatch(a)}}]);
return h}();f.exports=k.createActions(b)},84:function(f,k,b){var a=b(13);f.exports=function(b){return b===b&&!a(b)}},85:function(f,k,b){var a=b(48),l=b(14),c=b(47),e=b(20),d=b(13),g=Object.prototype.hasOwnProperty;f.exports=function(h){if(null==h)return[];d(h)||(h=Object(h));for(var b=h.length,b=b&&e(b)&&(l(h)||a(h))&&b||0,m=h.constructor,t=-1,m="function"==typeof m&&m.prototype===h,x=Array(b),f=0<b;++t<b;)x[t]=t+"";for(var k in h)(!f||!c(k,b))&&!("constructor"==k&&(m||!g.call(h,k)))&&x.push(k);return x}},
87:function(f,k,b){var a=b(77);f.exports=function(b,c,e){if("function"!=typeof b)return a;if(void 0===c)return b;switch(e){case 1:return function(a){return b.call(c,a)};case 3:return function(a,g,h){return b.call(c,a,g,h)};case 4:return function(a,g,h,e){return b.call(c,a,g,h,e)};case 5:return function(a,g,h,e,m){return b.call(c,a,g,h,e,m)}}return function(){return b.apply(c,arguments)}}},111:function(f,k,b){YUI.add("model",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}
var e=YUI.namespace("Env.Model"),d=a.Lang,g=a.Array,h=a.Object,n="error";a.Model=a.extend(c,a.Base,{idAttribute:"id",_allowAdHocAttrs:!0,_isYUIModel:!0,initializer:function(a){this.changed={};this.lastChange={};this.lists=[]},destroy:function(a,d){var b=this;"function"===typeof a&&(d=a,a=null);b.onceAfter("destroy",function(){function c(h){h||g.each(b.lists.concat(),function(c){c.remove(b,a)});d&&d.apply(null,arguments)}a&&(a.remove||a["delete"])?b.sync("delete",a,c):c()});return c.superclass.destroy.call(b)},
generateClientId:function(){e.lastId||(e.lastId=0);return this.constructor.NAME+"_"+(e.lastId+=1)},getAsHTML:function(c){c=this.get(c);return a.Escape.html(d.isValue(c)?String(c):"")},getAsURL:function(a){a=this.get(a);return encodeURIComponent(d.isValue(a)?String(a):"")},isModified:function(){return this.isNew()||!h.isEmpty(this.changed)},isNew:function(){return!d.isValue(this.get("id"))},load:function(a,c){var d=this;"function"===typeof a&&(c=a,a={});a||(a={});d.sync("read",a,function(b,g){var h=
{options:a,response:g},e;b?(h.error=b,h.src="load",d.fire(n,h)):(d._loadEvent||(d._loadEvent=d.publish("load",{preventable:!1})),e=h.parsed=d._parse(g),d.setAttrs(e,a),d.changed={},d.fire("load",h));c&&c.apply(null,arguments)});return d},parse:function(c){if("string"===typeof c)try{return a.JSON.parse(c)}catch(d){return this.fire(n,{error:d,response:c,src:"parse"}),null}return c},save:function(a,c){var d=this;"function"===typeof a&&(c=a,a={});a||(a={});d._validate(d.toJSON(),function(b){b?c&&c.call(null,
b):d.sync(d.isNew()?"create":"update",a,function(b,g){var h={options:a,response:g},e;b?(h.error=b,h.src="save",d.fire(n,h)):(d._saveEvent||(d._saveEvent=d.publish("save",{preventable:!1})),g&&(e=h.parsed=d._parse(g),d.setAttrs(e,a)),d.changed={},d.fire("save",h));c&&c.apply(null,arguments)})});return d},set:function(a,c,d){var b={};b[a]=c;return this.setAttrs(b,d)},setAttrs:function(c,d){var b=this.idAttribute,g,e,n,l;d=a.merge(d);l=d._transaction={};"id"!==b&&(c=a.merge(c),h.owns(c,b)?c.id=c[b]:
h.owns(c,"id")&&(c[b]=c.id));for(e in c)h.owns(c,e)&&this._setAttr(e,c[e],d);if(!h.isEmpty(l)){b=this.changed;n=this.lastChange={};for(e in l)h.owns(l,e)&&(g=l[e],b[e]=g.newVal,n[e]={newVal:g.newVal,prevVal:g.prevVal,src:g.src||null});d.silent||(this._changeEvent||(this._changeEvent=this.publish("change",{preventable:!1})),d.changed=n,this.fire("change",d))}return this},sync:function(){var a=g(arguments,0,!0).pop();"function"===typeof a&&a()},toJSON:function(){var a=this.getAttrs();delete a.clientId;
delete a.destroyed;delete a.initialized;"id"!==this.idAttribute&&delete a.id;return a},undo:function(a,c){var d=this.lastChange,b=this.idAttribute,e={},n;a||(a=h.keys(d));g.each(a,function(a){h.owns(d,a)&&(a=a===b?"id":a,n=!0,e[a]=d[a].prevVal)});return n?this.setAttrs(e,c):this},validate:function(a,c){c&&c()},addAttr:function(a,b,g){var h=this.idAttribute,e;h&&a===h&&(h=this._isLazyAttr("id")||this._getAttrCfg("id"),e=b.value===b.defaultValue?null:b.value,d.isValue(e)||(e=h.value===h.defaultValue?
null:h.value,d.isValue(e)||(e=d.isValue(b.defaultValue)?b.defaultValue:h.defaultValue)),b.value=e,h.value!==e&&(h.value=e,this._isLazyAttr("id")?this._state.add("id","lazy",h):this._state.add("id","value",e)));return c.superclass.addAttr.apply(this,arguments)},_parse:function(a){return this.parse(a)},_validate:function(a,c){function b(h){d.isValue(h)?(g.fire(n,{attributes:a,error:h,src:"validate"}),c(h)):c()}var g=this;1===g.validate.length?b(g.validate(a,b)):g.validate(a,b)},_setAttrVal:function(a,
d,b,g,h,e){var n=c.superclass._setAttrVal.apply(this,arguments),l=h&&h._transaction,f=e&&e.initializing;n&&(l&&!f)&&(l[a]={newVal:this.get(a),prevVal:b,src:h.src||null});return n}},{NAME:"model",ATTRS:{clientId:{valueFn:"generateClientId",readOnly:!0},id:{value:null}}})},"3.17.2",{requires:["base-build","escape","json-parse"]})},112:function(f,k,b){var a=b(13),l=Object.prototype.toString;f.exports=function(c){return a(c)&&"[object Function]"==l.call(c)}},113:function(f,k,b){var a=b(167),l=b(168),
c=b(87),e=b(77),d=b(175);f.exports=function(b,h,n){var m=typeof b;return"function"==m?void 0===h?b:c(b,h,n):null==b?e:"object"==m?a(b):void 0===h?d(b):l(b,h)}},114:function(f,k,b){var a=b(112),l=b(19),c=/^\[object .+?Constructor\]$/,e=Function.prototype.toString,d=RegExp("^"+e.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");f.exports=function(b){return null==b?!1:a(b)?d.test(e.call(b)):l(b)&&
c.test(b)}},115:function(f,k,b){k=b(126)();f.exports=k},117:function(f,k,b){b(120);f.exports=b(11).core.Object.assign},118:function(f,k,b){var a=b(11),l=b(119);f.exports=Object.assign||function(c,b){for(var d=Object(a.assertDefined(c)),g=arguments.length,h=1;g>h;)for(var n=a.ES5Object(arguments[h++]),m=l(n),f=m.length,k=0,p;f>k;)d[p=m[k++]]=n[p];return d}},119:function(f,k,b){var a=b(11);f.exports=function(b){var c=a.getKeys(b),e=a.getDesc,d=a.getSymbols;d&&a.each.call(d(b),function(a){e(b,a).enumerable&&
c.push(a)});return c}},120:function(f,k,b){f=b(78);f(f.S,"Object",{assign:b(118)})},121:function(f,k,b){var a=b(48),l=b(14),c=b(47),e=b(20),d=b(85),g=Object.prototype.hasOwnProperty;f.exports=function(b){for(var n=d(b),m=n.length,f=m&&b.length,k=!!f&&e(f)&&(l(b)||a(b)),p=-1,q=[];++p<m;){var r=n[p];(k&&c(r,f)||g.call(b,r))&&q.push(r)}return q}},122:function(f,k,b){var a=b(115),l=b(37);f.exports=function(c,b){return a(c,b,l)}},125:function(f,k,b){var a=b(11),l=b(78),c=a.isObject,e=a.toObject;a.each.call("freeze seal preventExtensions isFrozen isSealed isExtensible getOwnPropertyDescriptor getPrototypeOf keys getOwnPropertyNames".split(" "),
function(d,g){var h=(a.core.Object||{})[d]||Object[d],n=0,m={};m[d]=0==g?function(a){return c(a)?h(a):a}:1==g?function(a){return c(a)?h(a):a}:2==g?function(a){return c(a)?h(a):a}:3==g?function(a){return c(a)?h(a):!0}:4==g?function(a){return c(a)?h(a):!0}:5==g?function(a){return c(a)?h(a):!1}:6==g?function(a,c){return h(e(a),c)}:7==g?function(c){return h(Object(a.assertDefined(c)))}:8==g?function(a){return h(e(a))}:b(181).get;try{h("z")}catch(f){n=1}l(l.S+l.F*n,"Object",m)})},126:function(f,k,b){var a=
b(17);f.exports=function(b){return function(c,e,d){var g=a(c);d=d(c);for(var h=d.length,n=b?h:-1;b?n--:++n<h;){var m=d[n];if(!1===e(g[m],m,g))break}return c}}},127:function(f,k,b){var a=b(20),l=b(19),c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0;c["[object Arguments]"]=c["[object Array]"]=c["[object ArrayBuffer]"]=
c["[object Boolean]"]=c["[object Date]"]=c["[object Error]"]=c["[object Function]"]=c["[object Map]"]=c["[object Number]"]=c["[object Object]"]=c["[object RegExp]"]=c["[object Set]"]=c["[object String]"]=c["[object WeakMap]"]=!1;var e=Object.prototype.toString;f.exports=function(d){return l(d)&&a(d.length)&&!!c[e.call(d)]}},128:function(f,k,b){k=b(182)();f.exports=k},129:function(f,k,b){YUI.add("squarespace-model-sync-rest",function(a){function b(){this._ioConfigCache={}}b.prototype={sync:function(c,
b,d){a.Lang.isValue(b.timeout)||(b.timeout=1E7);a.ModelSync.REST.prototype.sync.apply(this,arguments)},_storeRequest:function(c,b){this._ioConfigCache[c.id]=a.merge(b,{})},_retrieveAndEvict:function(a){var b=this._ioConfigCache[a];this._ioConfigCache[a]=null;return b},_isCrumbFailure:function(a){return a&&a.crumbFail&&a.crumb},_sendSyncIORequest:function(c){var b=a.ModelSync.REST.prototype._sendSyncIORequest.apply(this,arguments);this._storeRequest(b,c);return b},_onSyncIOEnd:function(c,b){this._retrieveAndEvict(c);
a.ModelSync.REST.prototype._onSyncIOEnd.apply(this,arguments)},_onSyncIOSuccess:function(c,b,d){var g=this._retrieveAndEvict(c),h={},n=b.responseText;a.Lang.isValue(n)&&n.trim()&&(h=a.JSON.parse(n));this._isCrumbFailure(h)?(h=h.crumb,a.ModelSync.REST.CSRF_TOKEN=h,a.Env.CSRF_TOKEN=h,g.headers["X-CSRF-Token"]=h,this._sendSyncIORequest(g)):a.ModelSync.REST.prototype._onSyncIOSuccess.apply(this,arguments)},_onSyncIOFailure:function(c,b,d){if(c=d.callback){d={};var g=b.responseText;a.Lang.isValue(g)&&
g.trim()&&(d=a.JSON.parse(g));c({code:b.status,msg:b.statusText,responseJSON:d},b)}}};a.mix(b,a.ModelSync.REST,!1,null,1);a.namespace("Squarespace.ModelSync").REST=b},"1.0",{requires:["model-sync-rest"]})},130:function(f,k,b){YUI.add("model-sync-rest",function(a,b){function c(){}var e=a.Lang;c.CSRF_TOKEN=YUI.Env.CSRF_TOKEN;c.EMULATE_HTTP=!1;c.HTTP_HEADERS={Accept:"application/json","Content-Type":"application/json"};c.HTTP_METHODS={create:"POST",read:"GET",update:"PUT","delete":"DELETE"};c.HTTP_TIMEOUT=
3E4;c._NON_ATTRS_CFG=["root","url"];c.prototype={root:"",url:"",initializer:function(a){a||(a={});"root"in a&&(this.root=a.root||"");"url"in a&&(this.url=a.url||"")},getURL:function(c,b){var h=this.root,e=this.url;return this._isYUIModelList?!e?this.model.prototype.root:this._substituteURL(e,a.merge(this.getAttrs(),b)):h&&("create"===c||this.isNew())?h:!e?this._joinURL(this.getAsURL("id")||""):this._substituteURL(e,a.merge(this.getAttrs(),b))},parseIOResponse:function(a){return a.responseText},serialize:function(c){return a.JSON.stringify(this)},
sync:function(b,g,h){g||(g={});var e=this.getURL(b,g),m=c.HTTP_METHODS[b],l=a.merge(c.HTTP_HEADERS,g.headers),f=g.timeout||c.HTTP_TIMEOUT;g=g.csrfToken||c.CSRF_TOKEN;var k;"POST"===m||"PUT"===m?k=this.serialize(b):delete l["Content-Type"];if(c.EMULATE_HTTP&&("PUT"===m||"DELETE"===m))l["X-HTTP-Method-Override"]=m,m="POST";if(g&&("POST"===m||"PUT"===m||"DELETE"===m))l["X-CSRF-Token"]=g;this._sendSyncIORequest({action:b,callback:h,entity:k,headers:l,method:m,timeout:f,url:e})},_joinURL:function(a){var c=
this.root;if(!c&&!a)return"";"/"===a.charAt(0)&&(a=a.substring(1));return c&&"/"===c.charAt(c.length-1)?c+a+"/":c+"/"+a},_parse:function(a){"function"===typeof this.parseIOResponse&&(a=this.parseIOResponse(a));return this.parse(a)},_sendSyncIORequest:function(c){return a.io(c.url,{arguments:{action:c.action,callback:c.callback,url:c.url},context:this,data:c.entity,headers:c.headers,method:c.method,timeout:c.timeout,on:{start:this._onSyncIOStart,failure:this._onSyncIOFailure,success:this._onSyncIOSuccess,
end:this._onSyncIOEnd}})},_substituteURL:function(c,b){if(!c)return"";var h={};a.Object.each(b,function(a,c){if(e.isString(a)||e.isNumber(a))h[c]=encodeURIComponent(a)});return e.sub(c,h)},_onSyncIOEnd:function(a,c){},_onSyncIOFailure:function(a,c,b){(a=b.callback)&&a({code:c.status,msg:c.statusText},c)},_onSyncIOSuccess:function(a,c,b){(a=b.callback)&&a(null,c)},_onSyncIOStart:function(a,c){}};a.namespace("ModelSync").REST=c},"3.17.2",{requires:["model","io-base","json-stringify"]})},134:function(f,
k,b){f.exports=function(a){var b=a?a.length:0;return b?a[b-1]:void 0}},135:function(f,k,b){f.exports=function(a,b){for(var c=-1,e=a.length;++c<e;)if(b(a[c],c,a))return!0;return!1}},136:function(f,k,b){f.exports=function(a,b,c){var e=-1,d=a.length;b=null==b?0:+b||0;0>b&&(b=-b>d?0:d+b);c=void 0===c||c>d?d:+c||0;0>c&&(c+=d);d=b>c?0:c-b>>>0;b>>>=0;for(c=Array(d);++e<d;)c[e]=a[e+b];return c}},165:function(f,k,b){var a=b(170),l=b(171),c=b(172),e=b(14),d=b(127);k=Object.prototype;var g=k.hasOwnProperty,
h=k.toString;f.exports=function(b,m,f,k,p,q,r){var v=e(b),u=e(m),s="[object Array]",w="[object Array]";v||(s=h.call(b),"[object Arguments]"==s?s="[object Object]":"[object Object]"!=s&&(v=d(b)));u||(w=h.call(m),"[object Arguments]"==w?w="[object Object]":"[object Object]"!=w&&d(m));var y="[object Object]"==s,u="[object Object]"==w;if((w=s==w)&&!v&&!y)return l(b,m,s);if(!p&&(s=y&&g.call(b,"__wrapped__"),u=u&&g.call(m,"__wrapped__"),s||u))return f(s?b.value():b,u?m.value():m,k,p,q,r);if(!w)return!1;
q||(q=[]);r||(r=[]);for(s=q.length;s--;)if(q[s]==b)return r[s]==m;q.push(b);r.push(m);b=(v?a:c)(b,m,f,k,p,q,r);q.pop();r.pop();return b}},166:function(f,k,b){var a=b(80),l=b(17);f.exports=function(c,b,d){var g=b.length,h=g,n=!d;if(null==c)return!h;for(c=l(c);g--;){var m=b[g];if(n&&m[2]?m[1]!==c[m[0]]:!(m[0]in c))return!1}for(;++g<h;){var m=b[g],f=m[0],k=c[f],p=m[1];if(n&&m[2]){if(void 0===k&&!(f in c))return!1}else if(m=d?d(k,p,f):void 0,!(void 0===m?a(p,k,d,!0):m))return!1}return!0}},167:function(f,
k,b){var a=b(166),l=b(173),c=b(17);f.exports=function(b){var d=l(b);if(1==d.length&&d[0][2]){var g=d[0][0],h=d[0][1];return function(a){return null==a?!1:a[g]===h&&(void 0!==h||g in c(a))}}return function(c){return a(c,d)}}},168:function(f,k,b){var a=b(79),l=b(80),c=b(136),e=b(14),d=b(81),g=b(84),h=b(134),n=b(17),m=b(82);f.exports=function(b,f){var k=e(b),q=d(b)&&g(f),r=b+"";b=m(b);return function(d){if(null==d)return!1;var e=r;d=n(d);if((k||!q)&&!(e in d)){d=1==b.length?d:a(d,c(b,0,-1));if(null==
d)return!1;e=h(b);d=n(d)}return d[e]===f?void 0!==f||e in d:l(f,d[e],void 0,!0)}}},169:function(f,k,b){var a=b(79),l=b(82);f.exports=function(c){var b=c+"";c=l(c);return function(d){return a(d,c,b)}}},170:function(f,k,b){var a=b(135);f.exports=function(b,c,e,d,g,h,n){var m=-1,f=b.length,k=c.length;if(f!=k&&!(g&&k>f))return!1;for(;++m<f;){var p=b[m],k=c[m],q=d?d(g?k:p,g?p:k,m):void 0;if(void 0!==q){if(q)continue;return!1}if(g){if(!a(c,function(a){return p===a||e(p,a,d,g,h,n)}))return!1}else if(!(p===
k||e(p,k,d,g,h,n)))return!1}return!0}},171:function(f,k,b){f.exports=function(a,b,c){switch(c){case "[object Boolean]":case "[object Date]":return+a==+b;case "[object Error]":return a.name==b.name&&a.message==b.message;case "[object Number]":return a!=+a?b!=+b:a==+b;case "[object RegExp]":case "[object String]":return a==b+""}return!1}},172:function(f,k,b){var a=b(37),l=Object.prototype.hasOwnProperty;f.exports=function(c,b,d,g,h,n,m){var f=a(c),k=f.length,p=a(b).length;if(k!=p&&!h)return!1;for(p=
k;p--;){var q=f[p];if(!(h?q in b:l.call(b,q)))return!1}for(var r=h;++p<k;){var q=f[p],v=c[q],u=b[q],s=g?g(h?u:v,h?v:u,q):void 0;if(!(void 0===s?d(v,u,g,h,n,m):s))return!1;r||(r="constructor"==q)}return!r&&(d=c.constructor,g=b.constructor,d!=g&&"constructor"in c&&"constructor"in b&&!("function"==typeof d&&d instanceof d&&"function"==typeof g&&g instanceof g))?!1:!0}},173:function(f,k,b){var a=b(84),l=b(174);f.exports=function(c){c=l(c);for(var b=c.length;b--;)c[b][2]=a(c[b][1]);return c}},174:function(f,
k,b){var a=b(37),l=b(17);f.exports=function(c){c=l(c);for(var b=-1,d=a(c),g=d.length,h=Array(g);++b<g;){var n=d[b];h[b]=[n,c[n]]}return h}},175:function(f,k,b){var a=b(64),l=b(169),c=b(81);f.exports=function(b){return c(b)?a(b):l(b)}},177:function(f,k,b){YUI.add("model-list",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}var e=a.Attribute.prototype,d=a.Lang,g=a.Array;a.ModelList=a.extend(c,a.Base,{model:a.Model,_isYUIModelList:!0,initializer:function(c){c||(c={});var b=
this.model=c.model||this.model;"string"===typeof b&&((this.model=a.Object.getValue(a,b.split(".")))||a.error("ModelList: Model class not found: "+b));this.publish("add",{defaultFn:this._defAddFn});this.publish("reset",{defaultFn:this._defResetFn});this.publish("remove",{defaultFn:this._defRemoveFn});this.after("*:idChange",this._afterIdChange);this._clear();c.items&&this.add(c.items,{silent:!0})},destructor:function(){this._clear()},add:function(c,b){var e=c._isYUIModelList;return e||d.isArray(c)?
g.map(e?c.toArray():c,function(c,d){var h=b||{};"index"in h&&(h=a.merge(h,{index:h.index+d}));return this._add(c,h)},this):this._add(c,b)},create:function(c,b,d){var g=this;"function"===typeof b&&(d=b,b={});b||(b={});c._isYUIModel||(c=new this.model(c));g.fire("create",a.merge(b,{model:c}));return c.save(b,function(a){a||g.add(c,b);d&&d.apply(null,arguments)})},each:function(a,c){var b=this._items.concat(),d,g,e;d=0;for(e=b.length;d<e;d++)g=b[d],a.call(c||g,g,d,this);return this},filter:function(a,
c){var b=[],d=this._items,g,e,f;"function"===typeof a&&(c=a,a={});g=0;for(f=d.length;g<f;++g)e=d[g],c.call(this,e,g,this)&&b.push(e);return a.asList?(d=new this.constructor({model:this.model}),b.length&&d.add(b,{silent:!0}),d):b},get:function(a){return this.attrAdded(a)?e.get.apply(this,arguments):this.invoke("get",a)},getAsHTML:function(c){return this.attrAdded(c)?a.Escape.html(e.get.apply(this,arguments)):this.invoke("getAsHTML",c)},getAsURL:function(a){return this.attrAdded(a)?encodeURIComponent(e.get.apply(this,
arguments)):this.invoke("getAsURL",a)},getByClientId:function(a){return this._clientIdMap[a]||null},getById:function(a){return this._idMap[a]||null},invoke:function(a){var c=[this._items,a].concat(g(arguments,1,!0));return g.invoke.apply(g,c)},load:function(a,c){var b=this;"function"===typeof a&&(c=a,a={});a||(a={});this.sync("read",a,function(d,g){var e={options:a,response:g},f;d?(e.error=d,e.src="load",b.fire("error",e)):(b._loadEvent||(b._loadEvent=b.publish("load",{preventable:!1})),f=e.parsed=
b._parse(g),b.reset(f,a),b.fire("load",e));c&&c.apply(null,arguments)});return this},map:function(a,c){return g.map(this._items,a,c)},parse:function(c){if("string"===typeof c)try{return a.JSON.parse(c)||[]}catch(b){return this.fire("error",{error:b,response:c,src:"parse"}),null}return c||[]},remove:function(a,c){var b=a._isYUIModelList;return b||d.isArray(a)?(a=g.map(b?a.toArray():a,function(a){return d.isNumber(a)?this.item(a):a},this),g.map(a,function(a){return this._remove(a,c)},this)):this._remove(a,
c)},reset:function(c,b){c||(c=[]);b||(b={});var d=a.merge({src:"reset"},b);c=c._isYUIModelList?c.toArray():g.map(c,function(a){return a._isYUIModel?a:new this.model(a)},this);d.models=c;b.silent?this._defResetFn(d):(this.comparator&&c.sort(a.bind(this._sort,this)),this.fire("reset",d));return this},some:function(a,c){var b=this._items.concat(),d,g,e;d=0;for(e=b.length;d<e;d++)if(g=b[d],a.call(c||g,g,d,this))return!0;return!1},sort:function(c){if(!this.comparator)return this;var b=this._items.concat();
c||(c={});b.sort(a.rbind(this._sort,this,c));b=a.merge(c,{models:b,src:"sort"});c.silent?this._defResetFn(b):this.fire("reset",b);return this},sync:function(){var a=g(arguments,0,!0).pop();"function"===typeof a&&a()},toArray:function(){return this._items.concat()},toJSON:function(){return this.map(function(a){return a.toJSON()})},_add:function(c,b){var g;b||(b={});c._isYUIModel||(c=new this.model(c));g=c.get("id");if(this._clientIdMap[c.get("clientId")]||d.isValue(g)&&this._idMap[g])this.fire("error",
{error:"Model is already in the list.",model:c,src:"add"});else return g=a.merge(b,{index:"index"in b?b.index:this._findIndex(c),model:c}),b.silent?this._defAddFn(g):this.fire("add",g),c},_attachList:function(a){a.lists.push(this);a.addTarget(this)},_clear:function(){g.each(this._items,this._detachList,this);this._clientIdMap={};this._idMap={};this._items=[]},_compare:function(a,c){return a<c?-1:a>c?1:0},_detachList:function(a){var c=g.indexOf(a.lists,this);-1<c&&(a.lists.splice(c,1),a.removeTarget(this))},
_findIndex:function(a){var c=this._items,b=c.length,d=0,g,e;if(!this.comparator||!b)return b;for(e=this.comparator(a);d<b;)g=d+b>>1,a=c[g],0>this._compare(this.comparator(a),e)?d=g+1:b=g;return d},_parse:function(a){return this.parse(a)},_remove:function(c,b){var g;b||(b={});d.isNumber(c)?(g=c,c=this.item(g)):g=this.indexOf(c);if(-1===g||!c)this.fire("error",{error:"Model is not in the list.",index:g,model:c,src:"remove"});else return g=a.merge(b,{index:g,model:c}),b.silent?this._defRemoveFn(g):this.fire("remove",
g),c},_sort:function(a,c,b){a=this._compare(this.comparator(a),this.comparator(c));return 0===a?a:b&&b.descending?-a:a},_afterIdChange:function(a){var c=a.newVal,b=a.prevVal;a=a.target;if(d.isValue(b))if(this._idMap[b]===a)delete this._idMap[b];else return;else if(-1===this.indexOf(a))return;d.isValue(c)&&(this._idMap[c]=a)},_defAddFn:function(a){var c=a.model,b=c.get("id");this._clientIdMap[c.get("clientId")]=c;d.isValue(b)&&(this._idMap[b]=c);this._attachList(c);this._items.splice(a.index,0,c)},
_defRemoveFn:function(a){var c=a.model,b=c.get("id");this._detachList(c);delete this._clientIdMap[c.get("clientId")];d.isValue(b)&&delete this._idMap[b];this._items.splice(a.index,1)},_defResetFn:function(a){"sort"===a.src?this._items=a.models.concat():(this._clear(),a.models.length&&this.add(a.models,{silent:!0}))}},{NAME:"modelList"});a.augment(c,a.ArrayList)},"3.17.2",{requires:"array-extras array-invoke arraylist base-build escape json-parse model".split(" ")})},179:function(f,k,b){var a=b(9)["default"],
l=b(8)["default"];k=b(7);b=function(){function c(){l(this,c)}a(c,[{key:"refresh",value:function(){this.dispatch()}},{key:"setUrl",value:function(a){this.dispatch(a)}}]);return c}();f.exports=k.createActions(b)},180:function(f,k,b){b(125);f.exports=b(11).core.Object.keys},181:function(f,k,b){var a=b(11),l={}.toString,c=a.getNames,e="object"==typeof window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];f.exports.get=function(b){if(e&&"[object Window]"==l.call(b)){var g;try{g=c(b)}catch(h){g=
e.slice()}return g}return c(a.toObject(b))}},182:function(f,k,b){var a=b(113),l=b(122);f.exports=function(c){return function(b,d,g){var h={};d=a(d,g,3);l(b,function(a,b,g){g=d(a,b,g);b=c?g:b;a=c?a:g;h[b]=a});return h}}},184:function(f,k,b){YUI.add("datatype-date-format",function(a,b){var c=function(a,c,b){"undefined"===typeof b&&(b=10);for(c+="";parseInt(a,10)<b&&1<b;b/=10)a=c+a;return a.toString()},e={formats:{a:function(a,c){return c.a[a.getDay()]},A:function(a,c){return c.A[a.getDay()]},b:function(a,
c){return c.b[a.getMonth()]},B:function(a,c){return c.B[a.getMonth()]},C:function(a){return c(parseInt(a.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(a){return c(parseInt(e.formats.G(a)%100,10),0)},G:function(a){var c=a.getFullYear(),b=parseInt(e.formats.V(a),10);a=parseInt(e.formats.W(a),10);a>b?c++:0===a&&52<=b&&c--;return c},H:["getHours","0"],I:function(a){a=a.getHours()%12;return c(0===a?12:a,0)},j:function(a){var b=new Date(""+a.getFullYear()+"/1/1 GMT");a=new Date(""+
a.getFullYear()+"/"+(a.getMonth()+1)+"/"+a.getDate()+" GMT")-b;a=parseInt(a/6E4/60/24,10)+1;return c(a,0,100)},k:["getHours"," "],l:function(a){a=a.getHours()%12;return c(0===a?12:a," ")},m:function(a){return c(a.getMonth()+1,0)},M:["getMinutes","0"],p:function(a,c){return c.p[12<=a.getHours()?1:0]},P:function(a,c){return c.P[12<=a.getHours()?1:0]},s:function(a,c){return parseInt(a.getTime()/1E3,10)},S:["getSeconds","0"],u:function(a){a=a.getDay();return 0===a?7:a},U:function(a){var b=parseInt(e.formats.j(a),
10);a=6-a.getDay();b=parseInt((b+a)/7,10);return c(b,0)},V:function(a){var b=parseInt(e.formats.W(a),10),h=(new Date(""+a.getFullYear()+"/1/1")).getDay(),b=b+(4<h||1>=h?0:1);53===b&&4>(new Date(""+a.getFullYear()+"/12/31")).getDay()?b=1:0===b&&(b=e.formats.V(new Date(""+(a.getFullYear()-1)+"/12/31")));return c(b,0)},w:"getDay",W:function(a){var b=parseInt(e.formats.j(a),10);a=7-e.formats.u(a);b=parseInt((b+a)/7,10);return c(b,0,10)},y:function(a){return c(a.getFullYear()%100,0)},Y:"getFullYear",z:function(a){a=
a.getTimezoneOffset();var b=c(parseInt(Math.abs(a/60),10),0),e=c(Math.abs(a%60),0);return(0<a?"-":"+")+b+e},Z:function(a){var c=a.toString().replace(/^.*:\d\d( GMT[+-]\d+)? \(?([A-Za-z ]+)\)?\d*$/,"$2").replace(/[a-z ]/g,"");4<c.length&&(c=e.formats.z(a));return c},"%":function(a){return"%"}},aggregates:{c:"locale",D:"%m/%d/%y",F:"%Y-%m-%d",h:"%b",n:"\n",r:"%I:%M:%S %p",R:"%H:%M",t:"\t",T:"%H:%M:%S",x:"locale",X:"locale"},format:function(b,g){g=g||{};if(!a.Lang.isDate(b))return a.Lang.isValue(b)?
b:"";var h,f;h=g.format||"%Y-%m-%d";f=a.Intl.get("datatype-date-format");for(var l=function(a,c){var b=e.aggregates[c];return"locale"===b?f[c]:b},k=function(g,h){var l=e.formats[h];switch(a.Lang.type(l)){case "string":return b[l]();case "function":return l.call(b,b,f);case "array":if("string"===a.Lang.type(l[0]))return c(b[l[0]](),l[1]);default:return h}};h.match(/%[cDFhnrRtTxX]/);)h=h.replace(/%([cDFhnrRtTxX])/g,l);h=h.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g,k);l=k=void 0;return h}};a.mix(a.namespace("Date"),
e);a.namespace("DataType");a.DataType.Date=a.Date},"3.17.2",{lang:"ar ar-JO ca ca-ES da da-DK de de-AT de-DE el el-GR en en-AU en-CA en-GB en-IE en-IN en-JO en-MY en-NZ en-PH en-SG en-US es es-AR es-BO es-CL es-CO es-EC es-ES es-MX es-PE es-PY es-US es-UY es-VE fi fi-FI fr fr-BE fr-CA fr-FR hi hi-IN hu id id-ID it it-IT ja ja-JP ko ko-KR ms ms-MY nb nb-NO nl nl-BE nl-NL pl pl-PL pt pt-BR ro ro-RO ru ru-RU sv sv-SE th th-TH tr tr-TR vi vi-VN zh-Hans zh-Hans-CN zh-Hant zh-Hant-HK zh-Hant-TW".split(" ")})},
194:function(f,k,b){var a=b(31);f.exports={setPreviewInstallation:function(b,c){return a.put("/api/member-website-settings/"+b,{id:b,previewInstallationId:c})}}},195:function(f,k,b){var a=b(31);f.exports={getTemplate:function(b){return a.get("/api/templates/"+b)}}},196:function(f,k,b){var a=b(31),l=b(365);f.exports={loadTemplateInstallations:function(){return a.get("/api/template-installations")},setLiveInstallation:function(c){return a.post("/api/template/SetTemplate",l.stringify({installationId:c}))},
updateInstallation:function(c){return a.put("/api/template-installations/"+c.id,c)},setHomepageCollectionId:function(c){return a.post("/api/template/SetHomepageCollection",l.stringify({collectionId:c}))}}},206:function(f,k,b){YUI.add("datatype-date-math",function(a,b){var c=a.Lang;a.mix(a.namespace("Date"),{isValidDate:function(a){return c.isDate(a)&&isFinite(a)&&"Invalid Date"!=a&&!isNaN(a)&&null!=a?!0:!1},areEqual:function(a,c){return this.isValidDate(a)&&this.isValidDate(c)&&a.getTime()==c.getTime()},
isGreater:function(a,c){return this.isValidDate(a)&&this.isValidDate(c)&&a.getTime()>c.getTime()},isGreaterOrEqual:function(a,c){return this.isValidDate(a)&&this.isValidDate(c)&&a.getTime()>=c.getTime()},isInRange:function(a,c,b){return this.isGreaterOrEqual(a,c)&&this.isGreaterOrEqual(b,a)},addDays:function(a,c){return new Date(a.getTime()+864E5*c)},addMonths:function(a,c){var b=a.getFullYear(),h=a.getMonth()+c,b=Math.floor(b+h/12),h=(h%12+12)%12,f=new Date(a.getTime());f.setFullYear(b);f.setMonth(h);
return f},addYears:function(a,c){var b=a.getFullYear()+c,h=new Date(a.getTime());h.setFullYear(b);return h},listOfDatesInMonth:function(a){if(!this.isValidDate(a))return[];var c=this.daysInMonth(a),b=a.getFullYear();a=a.getMonth();for(var h=[],f=1;f<=c;f++)h.push(new Date(b,a,f,12,0,0));return h},daysInMonth:function(a){if(!this.isValidDate(a))return 0;var c=a.getMonth(),b=[31,28,31,30,31,30,31,31,30,31,30,31];if(1!=c)return b[c];a=a.getFullYear();return 0===a%400?29:0===a%100?28:0===a%4?29:28}});
a.namespace("DataType");a.DataType.Date=a.Date},"3.17.2",{requires:["yui-base"]})},207:function(f,k,b){YUI.add("datatype-date-parse",function(a,b){a.mix(a.namespace("Date"),{parse:function(c){c=new Date(+c||c);return a.Lang.isDate(c)?c:null}});a.namespace("Parsers").date=a.Date.parse;a.namespace("DataType");a.DataType.Date=a.Date},"3.17.2")},215:function(f,k,b){k=b(193);var a=b(12);b=b(217);f.exports={DEFAULT_COLLECTION_CONFIGURATIONS:{page:{collectionType:a.COLLECTION_TYPE_PAGE,typeName:"page",title:"Page",
ordering:k.CUSTOM,icon:"page",addText:"Add Block"},"gallery-block":{collectionType:a.GALLERY_BLOCK,typeName:"gallery-block",title:"Gallery Block",ordering:k.USER,acceptTypes:["image","video"]},products:{collectionType:a.PRODUCTS,typeName:"products",title:"Products",pageSize:20,ordering:k.USER,acceptTypes:["store_item"],view:b.PRODUCT_TABLE,icon:"products",addText:"Add Product"},"template-page":{collectionType:a.TEMPLATE_PAGE,title:"Template Page",icon:"projects"},"splash-page":{collectionType:a.SPLASH_PAGE,
typeName:"splash-page",title:"Cover Page",ordering:k.CUSTOM,icon:"splash-page"},subscription:{collectionType:a.COLLECTION_TYPE_SUBSCRIPTION,typeName:"subscription",title:"Subscription",ordering:k.CHRONOLOGICAL}},DEFAULT_COLLECTION_CONFIGURATION:{collectionType:a.COLLECTION_TYPE_GENERIC,supported:!0},DEFAULT_TEMPLATE_PAGE_CONFIGURATION:{icon:"template-page",collectionType:a.TEMPLATE_PAGE,supported:!0,folder:!1}}},217:function(f,k,b){f.exports={LIST:"list",GRID:"grid",PRODUCT:"product"}},328:function(f,
k,b){YUI.add("squarespace-mixins-event-list",function(a){a.namespace("Squarespace.Mixins");a.Squarespace.Mixins.EventList=a.Base.create("EventList",a.Base,[],{initializer:function(){a.Do.before(function(b){var c=a.Object.hasKey(b,"upcoming"),e=a.Object.hasKey(b,"past");if(c&&e)return new a.Do.AlterArgs("Parsing calendar-specific response",[[].concat(b.upcoming).concat(b.past)])},this,"parse",this)},getPastEvents:function(){var b=new Date;return this.filter(function(c){c=c.get("structuredContent");
if(null===c)return!1;c=a.DataType.Date.parse(c.get("endDate"));return a.DataType.Date.isGreater(b,c)})},getUpcomingEvents:function(){var b=new Date;return this.filter(function(c){c=c.get("structuredContent");if(null===c)return!1;c=a.DataType.Date.parse(c.get("endDate"));return!a.DataType.Date.isGreater(b,c)})}})},"1.0",{requires:["base","datatype-date","event-custom","json"]})},329:function(f,k,b){YUI.add("squarespace-models-audio",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.Audio=
a.Base.create("Audio",a.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Audio",validator:function(a){return"Audio"===a},readOnly:!0},embed:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},audioAssetUrl:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},artistName:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},lengthInMilliSeconds:{value:null,validator:a.Squarespace.AttrValidators.isNullOrNumber},bitRate:{value:null,validator:a.Squarespace.AttrValidators.isNullOrNumber},
sampleRate:{value:null,validator:a.Squarespace.AttrValidators.isNullOrNumber}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},330:function(f,k,b){YUI.add("squarespace-models-calendar-event",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.CalendarEvent=a.Base.create("CalendarEvent",a.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"CalendarEvent",validator:function(a){return"CalendarEvent"===a},readOnly:!0},startDate:{valueFn:function(){var a=
new Date,c=a.getMinutes();a.setSeconds(0);a.setMilliseconds(0);30<=c?(a.addHours(1),a.setMinutes(0)):a.setMinutes(30);return a.getTime()},validator:a.Squarespace.AttrValidators.isNumber},endDate:{valueFn:function(){var a=new Date(this.get("startDate"));a.addHours(1);return a.getTime()},validator:a.Squarespace.AttrValidators.isNumber}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},331:function(f,k,b){YUI.add("squarespace-models-check-in",function(a){a.namespace("Squarespace.Models");
a.Squarespace.Models.CheckIn=a.Base.create("CheckIn",a.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"CheckIn",validator:function(a){return"CheckIn"===a},readOnly:!0},checkinId:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},venueId:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},timeZone:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},venueName:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},address:{value:null,
validator:a.Squarespace.AttrValidators.isNullOrString},crossStreet:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},city:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},state:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},country:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},postalCode:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},categoryId:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},
categoryPluralName:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},categoryShortName:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},categoryIcon:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},332:function(f,k,b){var a=b(12),l=b(178);YUI.add("squarespace-models-collection-configuration",function(c){c.namespace("Squarespace.Models");c.Squarespace.Models.CollectionConfiguration=
c.Base.create("CollectionConfiguration",c.Model,[],{initializer:function(a){c.Lang.isBoolean(a.index)&&a.index?this.set("folderBehavior",l.INDEX):c.Lang.isBoolean(a.folder)&&a.folder&&this.set("folderBehavior",l.NONE)}},{ATTRS:{collectionType:{value:a.COLLECTION_TYPE_GENERIC},folder:{value:!1},folderBehavior:{},supported:{value:!0}}})},"1.0",{requires:["base","model"]})},333:function(f,k,b){b(7);var a=b(62),l=b(83),c=b(32),e=b(12),d=b(49);YUI.add("squarespace-models-content-collection",function(b){b.namespace("Squarespace.Models");
var f=b.Squarespace.Models.ContentCollection=b.Base.create("Collection",b.Model,[],{initializer:function(a){this.publish("delete");this.items=a?new b.Squarespace.Models.ContentItemList({items:a.items||[],parent:this,limit:this.get("itemLimit")}):new b.Squarespace.Models.ContentItemList({parent:this,limit:this.get("itemLimit")});this._itemsEventHandle=this.items.after(["load","add","remove"],this._updateItemCount,this);this._syncFolderChange(this.get("folder"));this.after("folderChange",function(a){this._syncFolderChange(a.newVal)})},
destructor:function(){this._itemsEventHandle.detach();this._itemsEventHandle=null;this.items.destroy();this.items=null},toDebugString:function(){return b.JSON.stringify(this.getAttrs(["navigationTitle","urlId","configureUrlId","id"]))},toJSON:function(){var a=this.constructor.superclass.toJSON.call(this);a.items=this.items.toJSON();return a},parse:function(a){a=f.superclass.parse.apply(this,arguments);a.passwordProtected&&(a.password=d.PASSWORD_MASK);return a},sync:function(a,b,c){switch(a){case "create":this._ensureDemoCloneAndSave(c);
break;case "delete":this.fire("delete");this._delete(c);break;case "read":this._read(b,c);break;case "update":this._ensureDemoCloneAndSave(c)}},load:function(a,c,d){"function"===typeof a&&(d=c,c=a,a={});if(this._readInProgress)this.onceAfter("load",c,d);else b.Model.prototype.load.call(this,a,c?b.bind(c,d||this):null)},resetToLastRead:function(){this.setAttrs(this._lastReadData)},ensureProcessedItems:function(){var a=function(c){this.items.load({fields:["mediaProcessingState"]},function(){this.items.some(function(a){return a.get("mediaProcessingState")!==
b.Squarespace.MediaProcessingState.READY})?b.later(500,this,a,c):c()}.bind(this))}.bind(this);return new b.Promise(function(b){a(b)}.bind(this))},_syncFolderChange:function(a){a&&this.set("dropdown",!0)},_ensureDemoCloneAndSave:function(a){if(this._shouldCloneCollection()){var c=this.toJSON();delete c.id;this.cloneToNewCollection({silent:!0}).then(b.bind(this._save,this,a,c))}else this._save(a)},_save:function(a,c){c=b.merge(c,this.toJSON());c.collectionId=c.id;delete c.tags;delete c.categories;delete c.mainImage;
delete c.iTunesImage;delete c.items;c.metadata&&c.metadata.albumCover&&delete c.metadata.albumCover;var d=b.bind(function(c){b.Data.post({url:"/api/commondata/SaveCollection",data:c,success:function(c){this._lastReadData=b.clone(c);a(null,c)},failure:function(b){a(b,null)}},this)},this);b.Lang.isValue(c.id)&&b.Lang.isNull(c.urlId)?b.Data.post({url:"/api/content-collections/"+c.id+"/generate-url",json:!0,data:{title:c.title,urlId:b.Squarespace.Utils.slugify(3>c.title.length?c.typeName+"-"+c.title:
c.title),configureUrlId:b.Squarespace.Utils.slugify(this.get("configureUrlId"))},success:function(a){c.urlId=a.urlId;c.configureUrlId=a.configureUrlId;d(c)}}):d(c)},_delete:function(a){b.Data.post({url:"/api/commondata/RemoveCollection",data:{collectionId:this.get("id")},success:function(b){a(null,b)},failure:function(b){a(b,null)}})},_read:function(a,c){this._readInProgress=!0;b.Data.get({url:"/api/commondata/GetCollection",data:{collectionId:this.get("id")},success:function(a){b.Squarespace.ContentCollectionUtils.usesDisplayIndex(a.ordering)?
this._fetchItemCount(a.id).then(function(d){this._readInProgress=!1;a.itemCount=d;this._lastReadData=b.clone(a);c(null,a)}.bind(this)):(this._readInProgress=!1,this._lastReadData=b.clone(a),c(null,a))},failure:function(a){this._readInProgress=!1;c(a,null)}},this)},_updateItemCount:function(){b.Squarespace.ContentCollectionUtils.usesDisplayIndex(this.get("ordering"))&&(this.isNew()?this.set("itemCount",0):this._fetchItemCount(this.get("id")).then(function(a){this.set("itemCount",a)}.bind(this)))},
_fetchItemCount:function(a){return new b.Promise(function(c,d){b.Data.get({url:"/api/content-collections/"+a+"/item-count",success:function(a){c(a)},failure:d},this)})},getTemplateConfiguration:function(){var a;a=this.get("typeName");var d=this.get("type");return(a=d===e.TEMPLATE_PAGE?c.getPageConfig(a):c.getCollectionConfig(a))?new b.Squarespace.Models.CollectionConfiguration(a):new b.Squarespace.Models.CollectionConfiguration({collectionType:d||e.COLLECTION_TYPE_GENERIC,ordering:this.get("ordering"),
folder:this.get("folder"),supported:!1})},cloneToNewCollection:function(a){return new b.Promise(b.bind(function(c,d){var e=b.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(this.get("id"));this._cloneExampleContent(a).then(b.bind(function(a){e.set("collectionId",a);e.save(c)},this))},this))},_cloneExampleContent:function(c){c=c||{};var d=new b.Promise(b.bind(function(d,e){var f=this.get("id");b.Data.post({url:"/api/commondata/CopyCollection",data:{collectionId:this.get("id"),processPointedCollectionItems:!!c.processPointedCollectionItems},
success:function(c){this.setAttrs(b.merge({mainImageId:null,mainImage:null},c));var h=c.id;a.getHomepageCollectionId()===f?l.setHomepageCollectionId(h).then(function(a){a.error?e():d(h)}):d(h)}},this)},this));d.then(b.bind(function(){this.fire("clonedExampleContent",{silent:!!c.silent})},this));return d},_shouldCloneCollection:function(){return this.get("isDemoCollection")&&this.get("type")===e.COLLECTION_TYPE_PAGE},getId:function(){return this.get("id")},_set:function(a,c,b){return this.constructor.superclass._set.call(this,
a,c,b)}},{ATTRS:{title:{validator:b.Lang.isString},navigationTitle:{validator:b.Lang.isString},websiteId:{},id:{value:null},enabled:{value:!0,validator:b.Lang.isBoolean},deleted:{value:!1,validator:b.Lang.isBoolean},homepage:{validator:b.Lang.isBoolean},starred:{validator:b.Lang.isBoolean},synchronizing:{validator:b.Lang.isBoolean},updatedOn:{},folder:{value:!1},isDemoCollection:{getter:function(){return b.Squarespace.ContentCollectionUtils.isDemoCollectionId(this.get("id"))}},itemCountExceeded:{getter:function(){return this.get("type")==
e.PRODUCTS&&this.get("itemCount")>=this.get("maxItemCount")?!0:!1}},itemCount:{validator:b.Lang.isNumber},isEmpty:{getter:function(){return 0===this.items.size()}},maxItemCount:{getter:function(){return this.get("type")==e.PRODUCTS?200:9999}},tags:{value:[],validator:b.Lang.isArray},categories:{value:[],validator:b.Lang.isArray},pageSize:{validator:b.Lang.isNumber,valueFn:function(){if(this.getTemplateConfiguration().get("ordering")===b.Squarespace.CollectionOrdering.CHRONOLOGICAL)return 20}},itemLimit:{value:20,
validator:b.Squarespace.AttrValidators.isNumber},ordering:{validator:function(a){return b.Object.values(b.Squarespace.CollectionOrdering).contains(a)}},type:{validator:function(a){return b.Object.values(e).contains(a)}},typeName:{validator:b.Lang.isString},fullUrl:{validator:b.Lang.isString},urlId:{validator:b.Squarespace.AttrValidators.isNullOrString},configureUrlId:{getter:function(a){a="";b.Lang.isValue(this.get("id"))&&(a=this.get("id")+"-configure");return a}},nextDisplayIndex:{getter:function(){return this.get("itemCount")}},
regionName:{value:"default",validator:function(a){return!b.Lang.isString(a)||0===a.length?!1:b.Object.keys(c.getState().layouts).contains(a)}},postByEmailAddress:{getter:function(a){return a?a+"@"+Static.SQUARESPACE_CONTEXT.prodDomain:""}}}});b.Squarespace.Models.ContentCollectionList=b.Base.create("Collections",b.ModelList,[],{model:b.Squarespace.Models.ContentCollection,sync:function(a,c,d){"read"==a&&b.Data.get({url:"/api/commondata/GetCollections",success:function(a){d(null,b.Object.values(a.collections))},
failure:function(a){d(a,null)}},this)},getCollectionById:function(a,c,d){var e=this.getById(a);e?c.call(d,e):(e=new b.Squarespace.Models.ContentCollection({id:a}),e.load({},function(){this.add(e);c.call(d,e)},this))},getCollectionFromData:function(a,c){if(!a)return null;if(!a.id)throw"getCollectionFromData needs at least an ID in the data to work.";var d=this.getById(a.id);d?c||d.setAttrs(a):d=this.add(new b.Squarespace.Models.ContentCollection(a));return d}});b.Squarespace.Utils.isInDamaskFrame()?
b.Squarespace.ContentCollectionCache=b.config.win.top.Y.Squarespace.ContentCollectionCache:b.Squarespace.ContentCollectionCache=new b.Squarespace.Models.ContentCollectionList},"2.0",{requires:"base model model-list promise squarespace-models-collection-configuration squarespace-models-content-item squarespace-models-content-item-list squarespace-util".split(" ")})},334:function(f,k,b){YUI.add("squarespace-models-content-item-list",function(a){a.namespace("Squarespace.Models");var b=a.Squarespace.Models.ContentItemList=
a.Base.create("ContentItemList",a.ModelList,[a.Squarespace.Mixins.EventList],{initializer:function(c){this.model=a.Squarespace.Models.ContentItem;c=c||{};(c=c.items)&&this.reset(c)},sync:function(a,b,d){switch(a){case "create":console.error("Squarespace.Models.ContentItemList: Create not implemented.");break;case "delete":console.error("Squarespace.Models.ContentItemList: Create not implemented.");break;case "read":this._read(b,d);break;case "update":console.error("Squarespace.Models.ContentItemList: Create not implemented.")}},
load:function(a,e){if(this.get("isChildItemList"))throw"Squarespace.Models.ContentItemList: Child items are loaded with their parent item. Loading them manually is not supported";b.superclass.load.call(this,a,e)},removeItems:function(c,b){this.remove(c,{source:"bulk-remove"});var d=a.Array.map(c,function(a){var b=a.get("id");a.destroy();return b},this);a.Data.post({url:"/api/commondata/RemoveItems",data:{items:d},success:function(d){this.get("parent").load();a.Lang.isFunction(b)&&b(null,d);this.fire("bulk-remove",
c)},failure:function(c){a.Lang.isFunction(b)&&b(c,null)}},this)},moveItems:function(b,e,d){if(this.get("isChildItemList"))throw"Squarespace.Models.ContentItemList: Moving child items is not currently supported.";var g=a.Array.map(b,function(a){return this.remove(this.getById(a.get("id")))},this),f=e.get("id"),k=e.items;k.load(a.bind(function(){k.add(g)},this));var l=a.Array.map(g,function(a){a.set("collectionId",f);a.get("items").each(function(a){a.set("collectionId",f)});return a.get("id")},this);
a.Data.post({url:"/api/commondata/MoveItems",data:{toCollectionId:f,items:l},success:function(g){this.get("parent").load();a.Lang.isFunction(d)&&d(null,g);this.fire("move-items",b,e)},failure:function(b){a.Lang.isFunction(d)&&d(b,null)}},this)},reorderItems:function(b,e,d){var g=this.get("parent"),f={};this.get("isChildItemList")?(f.collectionId=g.get("collectionId"),f.parentId=g.get("id")):f.collectionId=g.get("id");var k=1===b.length,l;k?(b=b[0],l=this.indexOf(this.getById(b.get("id"))),this._reorder([b],
e),0!==e&&(f.afterId=this.item(e-1).get("id")),f.itemId=b.get("id")):(this._reorder(b,e),0!==e&&(f.afterId=this.item(e-1).get("id")),b=a.Array.map(b,function(a){return a.get("id")},this),f.itemIds=a.JSON.stringify(b));var t=a.bind(function(b){a.Data.post({url:"/api/commondata/ReorderItems",data:b,success:function(b){k&&(0===l||0===e)&&g.load();a.Lang.isUndefined(b.items)||a.Array.each(b.items,function(a,b){this.getById(a.id).set("displayIndex",a.displayIndex)},this);this.fire("reordered");a.Lang.isFunction(d)&&
d(null,b);0<this._reorderQueue.size()&&t(thie._reorderQueue.next())},failure:function(b){a.Lang.isFunction(d)&&d(b,null)}},this)},this);this._reorderQueue||(this._reorderQueue=new a.Queue);this._reorderQueue.add(f);t(this._reorderQueue.next())},_reorder:function(a,b){var d=a.map(function(a){return this.getById(a.get("id"))},this);this.remove(d,{onReorder:!0,source:"reorder"});this.add(d,{onReorder:!0,source:"reorder",index:b})},_read:function(b,e){var d=this.get("parent").get("id");a.Data.get({url:"/api/content-collections/"+
d+"/content-items",data:a.merge({limit:this.get("limit")},b),success:function(a){this.set("pagination",{hasNextPage:a.hasNextPage,hasPreviousPage:a.hasPreviousPage,nextPageStart:a.nextPageStart,previousPageStart:a.previousPageStart});e(null,a.results)},failure:function(a){e(a,null)}},this)}},{ATTRS:{parent:{value:null,validator:function(b){return b instanceof a.Squarespace.Models.ContentCollection||b instanceof a.Squarespace.Models.ContentItem}},isChildItemList:{getter:function(){return this.get("parent")instanceof
a.Squarespace.Models.ContentItem}},pagination:{value:null},limit:{value:20,validator:a.Squarespace.AttrValidators.isNumber}}})},"1.0",{requires:"base json model-list squarespace-mixins-event-list squarespace-models-content-collection squarespace-models-content-item squarespace-util".split(" ")})},335:function(f,k,b){YUI.add("squarespace-models-content-item",function(a){a.namespace("Squarespace.Models");var b=a.Squarespace.Models.ContentItem=a.Base.create("Item",a.Model,[a.Squarespace.ModelSync.REST],
{root:"content-items",url:"content-items/{id}",load:function(){this.get("isGlobalFakeContentItem")&&(this.root="rest/global-content-items/",this.url="rest/global-content-items/{id}");b.superclass.load.apply(this,arguments)},initializer:function(b){this._needsJobListener()&&this._bindJobListener();this._updateNextDisplayIndex();b=this.get("items");b.after(["add","remove"],function(){this._updateNextDisplayIndex()},this);this.items=b;a.Do.after(function(){var b=this.get("collectionId"),c=a.Squarespace.API_ROOT;
a.Lang.isValue(b)&&(c+="content-collections/"+b+"/");c+=a.Do.currentRetVal;return new a.Do.AlterReturn("Adding prefix to url.",c)},this,"getURL",this)},destructor:function(){this._jobListener&&(this._jobListener.detach(),this._jobListener=null)},toJSON:function(){var c=b.superclass.toJSON.call(this),e=c.structuredContent;a.Lang.isValue(e)&&(c.structuredContent=e.toJSON());c.items=c.items.toJSON();a.Lang.isObject(c.pushedServices)&&(c.pushedServices=a.Object.keys(c.pushedServices));a.Lang.isObject(c.pendingPushedServices)&&
(c.pendingPushedServices=a.Object.keys(c.pendingPushedServices));return c},serialize:function(b){b=this.toJSON();delete b.items;delete b.author;delete b.fullUrl;delete b.assetUrl;delete b.resolved;delete b.postItemInjectCode;delete b.promotedBlock;delete b.promotedBlockType;delete b.nextDisplayIndex;delete b.mediaIsUploading;delete b.hasFileData;delete b.isGlobalFakeContentItem;delete b.childrenGroups;delete b.colorData;return a.JSON.stringify(b)},save:function(c,e){this.isNew()||!a.Lang.isObject(c)||
!c.fields?b.superclass.save.call(this,c,e):this._saveFields(c.fields,e)},autoSave:function(b,e){a.Lang.isFunction(b)?(e=b,b={}):a.Lang.isValue(b)||(b={});b.headers=a.merge(b.headers,{"X-AutoSave":!0});this.save(b,e)},like:function(b){a.Data.post({url:this.getURL()+"/sentiment/like",success:function(e){a.Lang.isFunction(b)&&b(null,e)},failure:function(e){a.Lang.isFunction(b)&&b(e,null)}},this)},dislike:function(b){a.Data.post({url:this.getURL()+"/sentiment/dislike",success:function(e){a.Lang.isFunction(b)&&
b(null,e)},failure:function(e){a.Lang.isFunction(b)&&b(e,null)}},this)},clearFileData:function(b){this.setAttrs({systemDataId:null,systemDataOrigin:null,mediaProcessingState:null,systemDataSourceType:null,systemDataVariants:null,filename:null});a.Data.post({url:"/api/commondata/ClearEmbeddedAsset",data:{itemId:this.get("id"),persistTransient:!0===b}})},clearChildGroup:function(b,e){a.Data.post({url:"/api/commondata/ClearChildGroup",data:{childType:b,itemId:this.get("id")},success:function(b){a.Lang.isFunction(e)&&
e(null,b)},failure:function(b){a.Lang.isFunction(e)&&e(b,null)}})},createConfiguration:function(b){b=a.merge(b,{model:this,title:"Back",panelPathName:this.get("name")||"newItem"});return new (a.Squarespace.ContentItemEditorFactory.getEditor(this,{variant:a.Squarespace.ContentItemEditorVariants.PANEL}))(b)},getAssetUrlForFormat:function(b){return a.Lang.sub("{assetUrl}?format={format}",{assetUrl:this.get("assetUrl"),format:b})},getId:function(){return this.get("id")},isLicensedAssetPreview:function(){return a.Lang.isValue(this.get("licensedAssetPreview"))},
isLicensedAsset:function(){return a.Lang.isValue(this.get("licensedAssetId"))},_needsJobListener:function(){var b=this.get("mediaProcessingState");return b===a.Squarespace.MediaProcessingState.QUEUED||b===a.Squarespace.MediaProcessingState.PROCESSING},_bindJobListener:function(){Static&&Static.JOB_MANAGER&&(this._jobListener=a.config.win.Static.JOB_MANAGER.on("completed",function(b){var e=this.get("id"),d=b.get("data.contentItemId");b=b.get("data.globalContentItemId");d===e?(this.load(),this._jobListener.detach()):
a.Lang.isValue(b)&&b===e&&(a.Data.get({url:"/api/rest/global-content-items/"+b,success:function(a){this.set("assetUrl",a.assetUrl);this.setAttrs(a)}},this),this._jobListener.detach())},this))},_updateNextDisplayIndex:function(){var a=0;this.get("items").each(function(b){b=b.get("displayIndex");b>=a&&(a=b+1)},this);this._set("nextDisplayIndex",a)},_saveFields:function(b,e){if(1<b.length)throw Error("Saving multiple fields is not currently supported.");var d=b[0],d={field:d,itemId:this.get("id"),value:this.get(d)};
a.Data.post({url:"/api/commondata/SaveItemField",data:a.merge({},d),success:function(b){a.Lang.isFunction(e)&&e(null,b.item)},failure:function(b){a.Lang.isFunction(e)&&e.call(b,null)}},this)},_getStructuredContentCtor:function(){switch(this.get("recordType")){case a.Squarespace.RecordType.AUDIO:return a.Squarespace.Models.Audio;case a.Squarespace.RecordType.EVENT:return a.Squarespace.Models.CalendarEvent;case a.Squarespace.RecordType.CHECKIN:return a.Squarespace.Models.CheckIn;case a.Squarespace.RecordType.EMBED:case a.Squarespace.RecordType.VIDEO:return a.Squarespace.Models.Embed;
case a.Squarespace.RecordType.INSTAGRAM:return a.Squarespace.Models.Instagram;case a.Squarespace.RecordType.KBARTICLE:return a.Squarespace.Models.KBArticle;case a.Squarespace.RecordType.LINK:return a.Squarespace.Models.Link;case a.Squarespace.RecordType.QUOTE:return a.Squarespace.Models.Quote;case a.Squarespace.RecordType.STORE_ITEM:return a.Squarespace.Models.StoreItem;case a.Squarespace.RecordType.TWEET:return a.Squarespace.Models.Tweet;default:return null}}},{ATTRS:{id:{value:null},collectionId:{value:null},
parentId:{value:null},authorId:{valueFn:function(){var b=a.Object.getValue(Static,["SQUARESPACE_CONTEXT","authenticatedAccount"]);return b?b.id:null}},proxyForId:{value:null},recordType:{validator:a.Squarespace.AttrValidators.isValueIn(a.Squarespace.RecordType),writeOnce:!0},childType:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},addedOn:{valueFn:function(){return(new Date).getTime()},validator:a.Squarespace.AttrValidators.isNumber,writeOnce:"initOnly"},updatedOn:{value:null,
validator:a.Squarespace.AttrValidators.isNullOrNumber,writeOnce:"initOnly"},publishOn:{valueFn:function(){return(new Date).getTime()},validator:a.Squarespace.AttrValidators.isNumber},unsaved:{value:null,validator:a.Squarespace.AttrValidators.isNullOrBoolean},urlId:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},title:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},body:{value:null,validator:a.Squarespace.AttrValidators.isNullOrObject},excerpt:{value:null,validator:a.Squarespace.AttrValidators.isNullOrObject},
displayIndex:{value:0,validator:a.Squarespace.AttrValidators.isNumber},starred:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},passthrough:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},tags:{value:[],validator:a.Squarespace.AttrValidators.isArray},categories:{value:[],validator:a.Squarespace.AttrValidators.isArray},workflowState:{value:a.Squarespace.WorkflowStates.DRAFT,validator:a.Squarespace.AttrValidators.isValueIn(a.Squarespace.WorkflowStates)},systemDataId:{value:null,
validator:a.Squarespace.AttrValidators.isNullOrString},systemDataVariants:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},systemDataOrigin:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},contentType:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},filename:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},dataSize:{value:null,validator:a.Squarespace.AttrValidators.isNullOrNumber},sourceUrl:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},
mediaProcessingState:{value:null,validator:a.Squarespace.AttrValidators.isNullOr(a.Squarespace.AttrValidators.isValueIn(a.Squarespace.MediaProcessingState))},mediaFocalPoint:{value:{x:0.5,y:0.5},setter:function(b){if(a.Lang.isString(b)){b=b.split(",");var e=parseFloat(b[0]);b=parseFloat(b[1]);return{x:!isNaN(e)&&1>=e?e:0.5,y:!isNaN(b)&&1>=b?b:0.5}}return b}},colorData:{value:null,validator:a.Squarespace.AttrValidators.isNullOrObject},clickthroughUrl:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},
location:{value:null,validator:a.Squarespace.AttrValidators.isNullOrObject},customContent:{value:null},likeCount:{value:0,validator:a.Squarespace.AttrValidators.isNumber},dislikeCount:{value:0,validator:a.Squarespace.AttrValidators.isNumber},commentCount:{value:0,validator:a.Squarespace.AttrValidators.isNumber},publicCommentCount:{value:0,validator:a.Squarespace.AttrValidators.isNumber},commentState:{valueFn:function(){var b=a.Object.getValue(Static,["SQUARESPACE_CONTEXT","websiteSettings"]),e=b.commentsEnabled;
return b.commentEnableByDefault||e?a.Squarespace.CommentStates.ENABLED:a.Squarespace.CommentStates.DISABLED},validator:a.Squarespace.AttrValidators.isValueIn(a.Squarespace.CommentStates)},commentDisableOn:{valueFn:function(){var b=a.Object.getValue(Static,["SQUARESPACE_CONTEXT","websiteSettings","commentDisableAfterDaysDefault"]);return b?a.Date.addDays(new Date,b).getTime():null},validator:a.Squarespace.AttrValidators.isNullOrNumber},pushedServices:{value:{},validator:a.Squarespace.AttrValidators.isObject},
shareStates:{value:[]},structuredContent:{valueFn:function(){var b=this._getStructuredContentCtor();return a.Lang.isNull(b)?null:new b},setter:function(b){if(b instanceof a.Squarespace.Models.StructuredContent)return b;var e=this._getStructuredContentCtor();return a.Lang.isNull(e)?null:new e(b)}},items:{valueFn:function(){return new a.Squarespace.Models.ContentItemList({parent:this})},setter:function(b){var e=this.get("items");return a.Lang.isValue(e)?(e.reset(b),e):b instanceof a.Squarespace.Models.ContentItemList?
b:new a.Squarespace.Models.ContentItemList({items:b,parent:this})}},childrenGroups:{value:{},validator:a.Squarespace.AttrValidators.isObject},author:{value:null,validator:a.Squarespace.AttrValidators.isNullOrObject},fullUrl:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},assetUrl:{value:null,getter:function(b){return a.Squarespace.UrlUtils.isSecure()?a.Squarespace.UrlUtils.securifyURL(b):b},validator:a.Squarespace.AttrValidators.isNulLOrString},resolved:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},
postItemInjectCode:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},promotedBlock:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},promotedBlockType:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},nextDisplayIndex:{value:0,validator:a.Squarespace.AttrValidators.isNumber,readOnly:!0},mediaIsUploading:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},hasFileData:{getter:function(){var b=this.get("mediaProcessingState")==a.Squarespace.MediaProcessingState.QUEUED;
return this.get("isGlobalFakeContentItem")?!this.isNew():"USER_UPLOAD"===this.get("systemDataOrigin")&&b?!0:b?!0:a.Lang.isValue(this.get("systemDataId"))}},isGlobalFakeContentItem:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},licensedAssetPreview:{value:null,validator:a.Squarespace.AttrValidators.isNullOrObject},licensedAssetId:{value:null,validator:a.Lang.isString},name:{getter:function(){return this.get("id")}},isPusher:{value:!0,readOnly:!0,validator:a.Squarespace.AttrValidators.isBoolean}}})},
"1.0",{requires:"base json model squarespace-attr-validators squarespace-enum squarespace-model-sync-rest squarespace-models-audio squarespace-models-calendar-event squarespace-models-check-in squarespace-models-content-item-list squarespace-models-embed squarespace-models-instagram squarespace-models-kb-article squarespace-models-link squarespace-models-quote squarespace-models-store-item squarespace-models-tweet squarespace-url-utils squarespace-util".split(" ")})},336:function(f,k,b){YUI.add("squarespace-models-embed",
function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.Embed=a.Base.create("Embed",a.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Embed",validator:function(a){return"Embed"===a},readOnly:!0},embed:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},oembed:{value:null,validator:a.Squarespace.AttrValidators.isNullOrObject},overlay:{value:!0,validator:a.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},
337:function(f,k,b){YUI.add("squarespace-models-instagram",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.Instagram=a.Base.create("Instagram",a.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Instagram",validator:function(a){return"Instagram"===a},readOnly:!0},instagramId:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},timeZone:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},imageLowResolutionUrl:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},
imageThumbnailUrl:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},imageStandardUrl:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},width:{value:null,validator:a.Squarespace.AttrValidators.isNullOrNumber},height:{value:null,validator:a.Squarespace.AttrValidators.isNullOrNumber},filter:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},userProfilePictureUrl:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},userAccountName:{value:null,
validator:a.Squarespace.AttrValidators.isNullOrString},userDisplayName:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},338:function(f,k,b){YUI.add("squarespace-models-kb-article",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.KBArticle=a.Base.create("KBArticle",a.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"KBArticle",validator:function(a){return"KBArticle"===
a},readOnly:!0},upVotes:{value:0,validator:a.Squarespace.AttrValidators.isNumber},downVotes:{value:0,validator:a.Squarespace.AttrValidators.isNumber}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},339:function(f,k,b){YUI.add("squarespace-models-link",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.Link=a.Base.create("Link",a.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Link",validator:function(a){return"Link"===
a},readOnly:!0},url:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},340:function(f,k,b){YUI.add("squarespace-models-quote",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.Quote=a.Base.create("Quote",a.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Quote",validator:function(a){return"Quote"===a},readOnly:!0},quote:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString}}})},
"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},341:function(f,k,b){var a=b(53);YUI.add("squarespace-models-store-item",function(b){b.namespace("Squarespace.Models");b.Squarespace.Models.StoreItem=b.Base.create("StoreItem",b.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"StoreItem",validator:function(a){return"StoreItem"===a},readOnly:!0},productType:{value:a.PHYSICAL,validator:b.Squarespace.AttrValidators.isValueIn(a)},priceCents:{value:0,
validator:b.Squarespace.AttrValidators.isNumber},salePriceCents:{value:0,validator:b.Squarespace.AttrValidators.isNumber},onSale:{value:!1,validator:b.Squarespace.AttrValidators.isBoolean},variants:{value:[],validator:b.Squarespace.AttrValidators.isArray},originalVariants:{value:[],validator:b.Squarespace.AttrValidators.isArray},variantOptionOrdering:{value:[],validator:b.Squarespace.AttrValidators.isArray},additionalFieldsFormId:{value:null,validator:b.Squarespace.AttrValidators.isNullOrString},
customAddButtonText:{value:"Add to Cart",validator:b.Squarespace.AttrValidators.isString},useCustomAddButtonText:{value:!1,validator:b.Squarespace.AttrValidators.isBoolean},additionalFieldsForm:{value:null}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},342:function(f,k,b){YUI.add("squarespace-models-structured-content",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.StructuredContent=a.Base.create("StructuredContent",a.Model,
[],{},{ATTRS:{_type:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString,writeOnce:"initOnly"}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},343:function(f,k,b){YUI.add("squarespace-models-tweet",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.Tweet=a.Base.create("Tweet",a.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Tweet",validator:function(a){return"Tweet"===a},readOnly:!0},tweetId:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},
timeZone:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},accountId:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},displayName:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},accountName:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},tweet:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},profileImageUrl:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},profileImageUrlHttps:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},
userLocation:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},1416:function(f,k,b){YUI.add("squarespace-simple-liking",function(a){var b=a.config.win.Static;a.Squarespace.SimpleLike={TEXT_LIKE_VERB_NONE:"No Likes",TEXT_LIKE_VERB_SINGULAR:"Like",TEXT_LIKE_VERB_PLURAL:"Likes",TEXT_LIKE_ACTIVATED:"You like this",TEXT_LIKE_SUGGEST:"Click to like",attached:!1,attach:function(){if(!this.attached){this.attached=
!0;var c;try{localStorage&&((c=a.JSON.parse(localStorage.getItem("squarespace-likes")))||(c={}),localStorage.setItem("squarespace-likes",a.JSON.stringify(c)))}catch(e){c={}}a.delegate("click",function(b){b=b.currentTarget;var e=b.getAttribute("data-item-id");if(e){for(var f=0;5>f;++f)a.Squarespace.SimpleLike.burst(b);if(!b.hasClass("clicked")&&!b.hasClass("float")){f=parseInt(b.getAttribute("data-like-count"),10);b.setAttribute("data-like-count",f+1);a.Squarespace.SimpleLike.renderLikeCount(b);b.addClass("clicked");
try{localStorage&&(c[e]=!0,localStorage.setItem("squarespace-likes",a.JSON.stringify(c)))}catch(k){console.warn("Unable to save like to local storage: ",k)}(new a.Squarespace.Models.ContentItem({id:e})).like(function(b,c){c.commited&&console.log("Like was counted!");a.Lang.isValue(b)&&b.crumbFail&&!a.Squarespace.Utils.areCookiesEnabled()&&alert("You need to enable cookies to be able to like something.")})}}},"body",".sqs-simple-like");a.all(".sqs-simple-like").each(function(d){var e=d.getAttribute("data-item-id");
e&&(b.SQUARESPACE_CONTEXT.websiteSettings.simpleLikingEnabled||d.remove(),c[e]&&d.addClass("clicked"),a.Squarespace.SimpleLike.renderLikeCount(d))})}},renderLikeCount:function(b){var e=b.getAttribute("data-item-id"),d=b.getAttribute("data-like-count");b=b.one(".like-count");e&&b&&(e="",e=0===d?a.Squarespace.SimpleLike.TEXT_LIKE_VERB_NONE:1==d?"1 "+a.Squarespace.SimpleLike.TEXT_LIKE_VERB_SINGULAR:d+" "+a.Squarespace.SimpleLike.TEXT_LIKE_VERB_PLURAL,b.setContent(e))},burst:function(b){var e=b.cloneNode(!0);
e.one(".like-count")&&e.one(".like-count").remove();var d=b.one(".like-icon");if(!d||"none"===d.getStyle("display"))d=b;e.setStyles({position:"absolute",left:d.getX()+"px",top:d.getY()+"px"});a.one(a.config.doc.body).append(e);b=new a.Anim({node:e,duration:2,easing:a.Easing.easeOut});b.set("to",{curve:a.Squarespace.SimpleLike.randomCurve(e)});b.on("end",function(){this.get("node").remove()});b.run();e.removeClass("clicked");e.addClass("float")},randomCurve:function(a){var b=[],d=Math.floor(2*Math.random())?
1:-1,f=Math.floor(2*Math.random())?1:-1,h=a.getX();a=a.getY();for(var k=0;3>k;++k)h+=Math.floor(30*Math.random())*d,a+=Math.floor(30*Math.random())*f,b.push([h,a]);return b}};a.config.win.Squarespace.onInitialize(a,function(){b.SQUARESPACE_CONTEXT.websiteSettings.simpleLikingEnabled&&a.Squarespace.SimpleLike.attach()})},1,{requires:["anim","node","json","squarespace-models-content-item"]})}});
